!function(e){function t(t){for(var n,i,c=t[0],l=t[1],o=t[2],m=0,u=[];m<c.length;m++)i=c[m],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&u.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);u.length;)u.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,c=1;c<a.length;c++){var l=a[c];0!==s[l]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={0:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var d=l;r.push([167,1]),a()}({122:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);a(86);var n=a(75),s=a.n(n),r=a(0),i=a.n(r),c=a(26),l=a.n(c),o=a(3),d=a(5),m=a(13),u=a.n(m),h=a(2);const p={BASIC:"基本",DETAIL:"詳細",STRAT:"計略"},g={beReady:Object(h.createAction)("BE_READY")(),openSideMenu:Object(h.createAction)("CHANGE_SIDEMENU_VISIBLE",()=>({openedSideMenu:!0}))(),closeSideMenu:Object(h.createAction)("CHANGE_SIDEMENU_VISIBLE",()=>({openedSideMenu:!1}))(),openFilter:Object(h.createAction)("CHANGE_FILTER_VISIBLE",()=>({openedFilter:!0}))(),closeFilter:Object(h.createAction)("CHANGE_FILTER_VISIBLE",()=>({openedFilter:!1}))(),openDeckConfig:Object(h.createAction)("CHANGE_DECK_CONFIG_VISIBLE",()=>({openedDeckConfig:!0}))(),closeDeckConfig:Object(h.createAction)("CHANGE_DECK_CONFIG_VISIBLE",()=>({openedDeckConfig:!1}))(),openUpdateInfo:Object(h.createAction)("CHANGE_UPDATE_INFO_VISIBLE",()=>({openedUpdateInfo:!0}))(),closeUpdateInfo:Object(h.createAction)("CHANGE_UPDATE_INFO_VISIBLE",()=>({openedUpdateInfo:!1}))(),enableNotice:Object(h.createAction)("CHANGE_SHOW_NOTICE",()=>({showNotice:!0}))(),disableNotice:Object(h.createAction)("CHANGE_SHOW_NOTICE",()=>({showNotice:!1}))(),openGeneralDetail:Object(h.createAction)("CHANGE_GENERAL_DETAIL",e=>({detailGeneral:e}))(),openAssistGeneralDetail:Object(h.createAction)("CHANGE_ASSIST_GENERAL_DETAIL",e=>({detailAssistGeneral:e}))(),closeAllModal:Object(h.createAction)("CLOSE_ALL_MODAL")(),changeActiveFilterTab:Object(h.createAction)("CHANGE_ACTIVE_FILTER",e=>({activeFilter:e}))(),storeInstallPromptEvent:Object(h.createAction)("STORE_INSTALL_PROMPT_EVENT",e=>({event:e}))()},E={ready:!1,openedSideMenu:!1,openedFilter:!1,openedDeckConfig:!1,openedUpdateInfo:!1,showNotice:!1,activeFilter:"BASIC",detailGeneral:void 0,installPromptEvent:null};var C=a(85);const f={basic:{searchMode:"general",belongStates:[],costs:[],unitTypes:[],forceMin:1,forceMax:11,useCostRatioForce:!1,costRatioForceMin:-4,costRatioForceMax:5,costRatioBaseForces:{10:3,15:6,20:8,25:9,30:10},intelligenceMin:1,intelligenceMax:11,conquestMin:0,conquestMax:4,skills:[],skillsAnd:!1,searchText:""},detail:{genMains:[],genMainsAnd:!1,rarities:[],generalTypes:[],varTypes:[],majorVersions:[],versions:[],enableDetailVersion:!1,pockets:[]},strategies:{showStrategyExplanation:!1,moraleMin:1,moraleMax:12,strategyCategories:[],strategyRanges:[],strategyTimes:[],strategySearchName:"",strategySearchExplanation:""}},v={filterCondition:f,effectiveFilterCondition:f,filterContents:{belongStates:[],costs:[],unitTypes:[],skills:[],genMains:[],rarities:[],generalTypes:[],varTypes:[],versions:[],majorVersions:[],strategyCategories:[],strategyRanges:[],strategyTimes:[],assistStrategyCategories:[]},generals:[],strategies:[],assistGenerals:[],currentPage:1,pageLimit:50},k={resetConditions:Object(h.createAction)("RESET_CONDITIONS")(),applyCondition:Object(h.createAction)("APPLY_CONDITION")(),setBasicCondition:Object(h.createAction)("SET_BASIC_CONDITION",e=>({condition:e}))(),setDetailCondition:Object(h.createAction)("SET_DETAIL_CONDITION",e=>({condition:e}))(),setStrategiesCondition:Object(h.createAction)("SET_STRATEGIES_CONDITION",e=>({condition:e}))(),setShowStrategyExplanation:Object(h.createAction)("SET_SHOW_STRATEGY_EXPLANATION",e=>e)(),setBaseData:Object(h.createAction)("SET_BASE_DATA",e=>({baseData:e}))(),incrementPage:Object(h.createAction)("INCREMENT_PAGE",()=>({page:1}))(),resetPage:Object(h.createAction)("RESET_PAGE")(),decrementPage:Object(h.createAction)("DECREMENT_PAGE",()=>({page:-1}))()};a(4);const N=["personal","personal-strategy-exclude-assist","personal-assist","personal-strategy"];const b={deckCards:[],assistDeckCards:[],activeIndex:null,activeAssistIndex:null,searchCondition:void 0,deckConstraints:{limitCost:80,sameCard:"personal",assistCardLimit:1}},y={addDeckGeneral:Object(h.createAction)("ADD_DECK_GENERAL",e=>e)(),changeDeckGeneral:Object(h.createAction)("CHANGE_DECK_GENERAL",(e,t)=>({index:e,card:t}))(),addDeckDummy:Object(h.createAction)("ADD_DECK_DUMMY",e=>e)(),setDeckDummyValue:Object(h.createAction)("SET_DECK_DUMMY_VALUE",(e,t)=>({index:e,deckCard:t}))(),setDecks:Object(h.createAction)("SET_DECK_LIST",e=>e)(),removeDeck:Object(h.createAction)("REMOVE_DECK",e=>e)(),addDeckAssist:Object(h.createAction)("ADD_DECK_ASSIST",e=>e)(),changeDeckAssist:Object(h.createAction)("CHANGE_DECK_ASSIST",(e,t)=>({index:e,card:t}))(),setAssists:Object(h.createAction)("SET_ASSIST_LIST",e=>e)(),removeDeckAssist:Object(h.createAction)("REMOVE_DECK_ASSIST",e=>e)(),sliceDeckAssist:Object(h.createAction)("SLICE_DECK_ASSIST")(),clearDeck:Object(h.createAction)("CLEAR_DECK")(),setActiveCard:Object(h.createAction)("SET_ACTIVE_CARD",e=>e)(),setActiveAssistCard:Object(h.createAction)("SET_ACTIVE_ASSIST_CARD",e=>e)(),searchByDeck:Object(h.createAction)("SEARCH_BY_DECK",(e,t)=>({index:e,condition:t}))(),clearActiveCard:Object(h.createAction)("CLEAR_ACTIVE_CARD")(),selectMainGen:Object(h.createAction)("SELECT_MAIN_GEN",(e,t)=>({index:e,genMain:t}))(),setDeckConstraints:Object(h.createAction)("SET_DECK_CONSTRAINTS",e=>({condition:e}))()};var A=a(79),S=a.n(A);const D={showDialog:Object(h.createAction)("SHOW_DIALOG",e=>e)(),closeDialog:Object(h.createAction)("CLOSE_DIALOG")()},I={show:!1,title:"",message:"",logoUrl:void 0,redText:"",blueText:"",cancelable:!0,animation:!0,actionRed:()=>{},actionBlue:()=>{},actionCancel:void 0};const T={datalistReducer:function(e=v,t){switch(t.type){case"RESET_CONDITIONS":return{...e,filterCondition:f,effectiveFilterCondition:f,currentPage:v.currentPage};case"APPLY_CONDITION":return{...e,effectiveFilterCondition:Object(C.a)(e.filterCondition),currentPage:v.currentPage};case"SET_BASIC_CONDITION":return{...e,filterCondition:{...e.filterCondition,basic:{...e.filterCondition.basic,...t.payload.condition}}};case"SET_DETAIL_CONDITION":return{...e,filterCondition:{...e.filterCondition,detail:{...e.filterCondition.detail,...t.payload.condition}}};case"SET_STRATEGIES_CONDITION":return{...e,filterCondition:{...e.filterCondition,strategies:{...e.filterCondition.strategies,...t.payload.condition}}};case"SET_SHOW_STRATEGY_EXPLANATION":return{...e,filterCondition:{...e.filterCondition,strategies:{...e.filterCondition.strategies,showStrategyExplanation:t.payload}}};case"SET_BASE_DATA":{const a=t.payload.baseData,{generals:n,strategies:s,assistGenerals:r,filterContents:i}=a;return{...e,filterCondition:f,effectiveFilterCondition:f,currentPage:v.currentPage,filterContents:i,generals:n,strategies:s,assistGenerals:r}}case"RESET_PAGE":return{...e,currentPage:v.currentPage};case"INCREMENT_PAGE":case"DECREMENT_PAGE":{const a=t.payload.page;return{...e,currentPage:e.currentPage+a}}default:return e}},deckReducer:function(e=b,t){switch(t.type){case"ADD_DECK_GENERAL":{const a=t.payload;return{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,deckCards:[...e.deckCards,{...a}]}}case"CHANGE_DECK_GENERAL":{const{index:a,card:n}=t.payload,s=[...e.deckCards];return s[a]={...n},{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,deckCards:s}}case"ADD_DECK_DUMMY":{const{cost:a,belongState:n,unitType:s}=t.payload;return{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,deckCards:[...e.deckCards,{cost:a,belongState:n,unitType:s,pocket:!1}]}}case"SET_DECK_DUMMY_VALUE":{const{index:a,deckCard:n}=t.payload,s=[...e.deckCards],r=s[a];return!r||"general"in r?e:(s[a]={...r,...n},{...e,deckCards:s})}case"SET_DECK_LIST":return{...e,deckCards:t.payload};case"REMOVE_DECK":{const a=t.payload,n=e.deckCards.filter((e,t)=>t!==a);return{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,deckCards:n}}case"ADD_DECK_ASSIST":{const a=t.payload;return{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,assistDeckCards:[...e.assistDeckCards,{...a}]}}case"CHANGE_DECK_ASSIST":{const{index:a,card:n}=t.payload,s=[...e.assistDeckCards];return s[a]={...n},{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,assistDeckCards:s}}case"SET_ASSIST_LIST":return{...e,assistDeckCards:t.payload};case"REMOVE_DECK_ASSIST":{const a=t.payload,n=e.assistDeckCards.filter((e,t)=>t!==a);return{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,assistDeckCards:n}}case"SLICE_DECK_ASSIST":{const{assistDeckCards:t,deckConstraints:{assistCardLimit:a}}=e;if(t.length<=a)return{...e};const n=t.slice(0,a);return{...e,assistDeckCards:n}}case"CLEAR_DECK":return{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,deckCards:[],assistDeckCards:[]};case"SET_ACTIVE_CARD":{const a=t.payload;return{...e,activeIndex:a,activeAssistIndex:null,searchCondition:void 0}}case"SET_ACTIVE_ASSIST_CARD":{const a=t.payload;return{...e,activeIndex:null,activeAssistIndex:a,searchCondition:void 0}}case"SEARCH_BY_DECK":{const{index:a,condition:n}=t.payload;return{...e,activeIndex:a,activeAssistIndex:null,searchCondition:n}}case"CLEAR_ACTIVE_CARD":return{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0};case"SELECT_MAIN_GEN":{const{index:a,genMain:n}=t.payload,s=[...e.deckCards],r=s[a];return null==r?e:(s[a]={...r,genMain:n},{...e,activeIndex:null,activeAssistIndex:null,searchCondition:void 0,deckCards:s})}case"SET_DECK_CONSTRAINTS":return{...e,deckConstraints:{...e.deckConstraints,...t.payload.condition}};default:return e}},dialogReducer:function(e=I,t){switch(t.type){case"SHOW_DIALOG":{const{cancelable:e,animation:a,...n}=t.payload;return{...n,show:!0,cancelable:null==e||e,animation:null==a||a}}case"CLOSE_DIALOG":return I;default:return e}},windowReducer:function(e=E,t){switch(t.type){case"BE_READY":return{...e,ready:!0};case"CHANGE_SIDEMENU_VISIBLE":const{payload:{openedSideMenu:a}}=t;return{...e,openedSideMenu:a};case"CHANGE_FILTER_VISIBLE":const{payload:{openedFilter:n}}=t;return{...e,openedFilter:n};case"CHANGE_DECK_CONFIG_VISIBLE":const{payload:{openedDeckConfig:s}}=t;return{...e,openedDeckConfig:s};case"CHANGE_UPDATE_INFO_VISIBLE":const{payload:{openedUpdateInfo:r}}=t;return{...e,openedUpdateInfo:r};case"CLOSE_ALL_MODAL":return{...e,openedFilter:!1,openedDeckConfig:!1,openedUpdateInfo:!1,detailGeneral:void 0,detailAssistGeneral:void 0};case"CHANGE_ACTIVE_FILTER":const{payload:{activeFilter:i}}=t;return{...e,activeFilter:i};case"CHANGE_SHOW_NOTICE":const{payload:{showNotice:c}}=t;return{...e,showNotice:c};case"CHANGE_GENERAL_DETAIL":const{payload:{detailGeneral:l}}=t;return{...e,detailGeneral:l};case"CHANGE_ASSIST_GENERAL_DETAIL":const{payload:{detailAssistGeneral:o}}=t;return{...e,detailAssistGeneral:o};case"STORE_INSTALL_PROMPT_EVENT":const{payload:{event:d}}=t;return{...e,installPromptEvent:d};default:return e}}};var x=Object(d.c)(Object(d.b)(T));const O=[],_=[],R={action:y.setDecks,selector:e=>{const t=e.deckReducer.deckCards;return 0===t.length?O:t},defaultValue:O,valueToString:e=>{const t=x.getState().datalistReducer,a=(({generals:e,filterContents:t})=>a=>{if("general"in a){const n=e.find(e=>e.id===a.general);if(!n)return"";const s=t.genMains.find(e=>e.id===a.genMain);return[a.pocket?n.pocketCode:n.code,s?s.code:""].join("_")}const n=t.belongStates.find(e=>e.id===a.belongState),s=n?n.nameShort:"",r=t.unitTypes.find(e=>e.id===a.unitType),i=r?r.name[0]:"";return["","",a.cost,s,i].join("_")})({generals:t.generals,filterContents:t.filterContents});return e.map(a).filter(e=>e).join("|")},stringToValue:e=>{if(!e)return O;const t=x.getState().datalistReducer,a=(({generals:e,filterContents:t})=>a=>{const[n,s,r,i,c]=a.split("_"),l=(({code:e,genMainCode:t},{generals:a,filterContents:n})=>{if(!e)return null;const s=a.find(t=>t.code===e||t.pocketCode===e);if(!s)return null;const r=s.code!==e,i=n.genMains.find(e=>e.code===t);let c=void 0;return i&&s.genMains.includes(i)&&(c=i.id),{general:s.id,genMain:c,pocket:r}})({code:n,genMainCode:s},{generals:e,filterContents:t});return l||(({cost:e,belongStateNameShort:t,unitTypeName:a},n)=>{const s=n.belongStates.find(e=>e.nameShort===t),r=n.unitTypes.find(e=>e.name[0]===a);return{cost:e&&n.costs.findIndex(t=>t.code===e)?e:"10",belongState:s?s.id:void 0,unitType:r?r.id:void 0}})({cost:r,belongStateNameShort:i,unitTypeName:c},t)})({generals:t.generals,filterContents:t.filterContents});return e.split("|").map(a)}},w={action:y.setAssists,selector:e=>{const t=e.deckReducer.assistDeckCards;return 0===t.length?_:t},defaultValue:_,valueToString:e=>{const t=(({assistGenerals:e})=>t=>{const a=e.find(e=>e.id===t.assist);return a?a.code:""})({assistGenerals:x.getState().datalistReducer.assistGenerals});return e.map(t).filter(e=>e).join("|")},stringToValue:e=>{if(!e)return _;const t=(({assistGenerals:e})=>t=>{var a;const n=e.find(e=>e.code===t),s=null!==(a=null==n?void 0:n.id)&&void 0!==a?a:null;return s?{assist:s}:null})({assistGenerals:x.getState().datalistReducer.assistGenerals});return e.split("|").map(t).filter(e=>!!e)}},M={action:e=>y.setDeckConstraints({limitCost:e}),selector:e=>e.deckReducer.deckConstraints.limitCost,defaultValue:80,stringToValue:e=>{try{const t=parseInt(e);if(t>=10&&t<=250&&t%5==0)return t}catch(e){}return 80}},P={action:e=>y.setDeckConstraints({sameCard:e}),selector:e=>e.deckReducer.deckConstraints.sameCard,defaultValue:"personal",stringToValue:e=>function(e){return N.includes(e)}(e)?e:"personal"},G={action:e=>y.setDeckConstraints({assistCardLimit:e}),selector:e=>e.deckReducer.deckConstraints.assistCardLimit,defaultValue:1,stringToValue:e=>{try{const t=parseInt(e);if(t>=0&&t<=1&&t%1==0)return t}catch(e){}return 1}};let V=!1;a(122);var j=a(1),L=a.n(j),B=a(7),F=a(84),U=a(34);a(126);class q extends i.a.PureComponent{constructor(...e){super(...e),this.handleTabClick=e=>{const t=e.currentTarget.dataset.tab;t&&this.props.onTabChanged(t)}}render(){const{tabs:e,activeTab:t}=this.props,a=[];return Object.entries(e).forEach(([e,n])=>{const s=t===e,r="tab-button-".concat(e.toLowerCase()),c=L()([r,{active:s}]);a.push(i.a.createElement("button",{key:e,"data-tab":e,className:c,onClick:this.handleTabClick},n))}),i.a.createElement("div",{className:"card-filter-tabs"},a)}}a(127);var H=i.a.memo(({resetConditions:e,closeFilter:t})=>i.a.createElement("div",{className:"card-filter-actions"},i.a.createElement("button",{className:"action-buton-reset",onClick:e},"リセット"),i.a.createElement("button",{className:"action-buton-ok",onClick:t},"OK"))),K=(a(128),a(33));class Y extends i.a.PureComponent{constructor(...e){super(...e),this.handleInstallPrompt=e=>{this.props.pwaInstallEnabled?this.props.installPrompt():e.stopPropagation()},this.handleOpenUpdateInfo=()=>{this.props.openUpdateInfo()}}render(){const{pwaInstallEnabled:e,showNotice:t}=this.props;return i.a.createElement("ul",{className:"side-menu-list"},i.a.createElement("li",{className:"side-menu-item"},i.a.createElement("a",{href:"./about.html",target:"_blank",rel:"noopener noreferrer"},"このツールについて",i.a.createElement(B.a,{className:"external-link-icon",icon:K.faExternalLinkAlt}))),i.a.createElement("li",{className:"side-menu-item"},i.a.createElement("a",{onClick:this.handleOpenUpdateInfo},"更新情報",i.a.createElement(B.a,{icon:U.faExclamationCircle,className:L()("notice",{show:t})}))),i.a.createElement("li",{className:"side-menu-item pwa-install"},i.a.createElement("a",{onClick:this.handleInstallPrompt,className:L()({disabled:!e})},"インストールする")))}}var W=Object(o.b)(e=>({showNotice:e.windowReducer.showNotice,installPromptEvent:e.windowReducer.installPromptEvent}),e=>Object(d.a)({openUpdateInfo:g.openUpdateInfo,storeInstallPromptEvent:g.storeInstallPromptEvent},e),(e,t)=>({...{showNotice:e.showNotice,pwaInstallEnabled:!!e.installPromptEvent},...{openUpdateInfo:t.openUpdateInfo,installPrompt:async()=>{e.installPromptEvent&&(await e.installPromptEvent.prompt(),t.storeInstallPromptEvent(null))}}}),{areMergedPropsEqual:()=>!1})(Y),X=(a(129),a(17)),J=a(80),z=(a(130),a(21));const Q="軍師",$="控えめな正兵";class Z extends i.a.PureComponent{constructor(...e){super(...e),this.handleActive=e=>{e.stopPropagation();const{index:t,onActive:a}=this.props;a(t)},this.handleRemove=e=>{e.stopPropagation();const{index:t,onRemoveDeck:a,assist:n}=this.props;n&&a(t)}}render(){var e,t,a,n,s,r;const{index:c,active:l,assist:o}=this.props,d={},m={},u={};o?(d.backgroundColor=o.state.thincolor,m.backgroundColor=o.state.color):m.display="none";const h=null!==(e=null==o||null===(t=o.state)||void 0===t?void 0:t.nameShort)&&void 0!==e?e:"",p=null!==(a=null==o?void 0:o.name)&&void 0!==a?a:0===c?Q:"",g=null!==(n=null==o?void 0:o.avatarUrl)&&void 0!==n?n:void 0;g||(u.display="none");const E=null!==(s=null==o||null===(r=o.strategy)||void 0===r?void 0:r.name)&&void 0!==s?s:0===c?$:"",C=!o;return i.a.createElement("div",{className:L()("assist-deck-card",{active:l,"no-assist":C}),style:d,onClick:this.handleActive},i.a.createElement("span",{className:"image"},i.a.createElement("img",{className:"assist-thumb",style:u,src:g})),i.a.createElement("span",{className:"state",style:m},h),i.a.createElement("span",{className:"card-type"},"遊軍"),i.a.createElement("span",{className:"name"},p),i.a.createElement("span",{className:"strategy"},E),i.a.createElement("div",{className:"tool-box"},i.a.createElement("button",{className:"tool-button remove",onClick:this.handleRemove},i.a.createElement(B.a,{icon:z.faMinusCircle}))))}}a(131);var ee=a(35);class te extends i.a.PureComponent{constructor(...e){super(...e),this.handleSelectMainGen=e=>{const{index:t,onSelectMainGen:a}=this.props;let n=e.currentTarget.value;null!=n&&""!==n||(n=void 0),a(t,n)},this.handleActive=e=>{e.stopPropagation();const{index:t,onActive:a}=this.props;a(t)},this.handleRemove=e=>{e.stopPropagation();const{index:t,onRemoveDeck:a}=this.props;a(t)},this.handleSearch=e=>{e.stopPropagation();const{index:t,onToggleSearch:a,general:n}=this.props;a(t,{cost:n.raw.cost,belongState:n.raw.state,unitType:n.raw.unit_type})}}render(){const{general:e,genMain:t,active:a,search:n,pocket:s}=this.props,r={backgroundColor:e.state.thincolor},c=e.state.color,l={backgroundColor:c},o=[c,"".concat(c," 30px"),"transparent 92px","transparent"].join(","),d={background:"linear-gradient(-30deg, ".concat(o,")")},m=[];e.skills.forEach(e=>{m.push(i.a.createElement("span",{className:"skill",key:e.id},e.nameShort))}),0===m.length&&m.push(i.a.createElement("span",{className:"no-skill",key:0},"特技なし"));const u=[];e.genMains.forEach((e,t)=>{u.push(i.a.createElement("option",{value:e.id,key:t},e.nameShort))});const h=null!=t?t:"";return i.a.createElement("div",{className:L()("deck-card",{active:a}),style:r,onClick:this.handleActive},i.a.createElement("div",{className:"deck-card-inner-top"},i.a.createElement("img",{className:"general-thumb",src:e.thumbUrl(s)}),i.a.createElement("div",{className:"shadow",style:d}),i.a.createElement("span",{className:"state",style:l},e.state.nameShort),i.a.createElement("span",{className:"version",style:l},e.version),i.a.createElement("span",{className:"cost","data-label":"コスト"},e.cost.name),i.a.createElement("span",{className:"unit","data-label":"兵種"},e.unitType.nameShort),i.a.createElement("span",{className:"name"},i.a.createElement("span",{className:"rarity"},e.rarity.name),e.name)),i.a.createElement("div",{className:"deck-card-inner-bottom"},i.a.createElement("span",{className:"force","data-label":"武"},e.force),i.a.createElement("span",{className:"intelligence","data-label":"知"},e.intelligence),i.a.createElement("span",{className:"conquest","data-label":"制圧"},e.conquest),i.a.createElement("span",{className:"skills"},m),i.a.createElement("span",{className:"gen-mains","data-label":"主将器"},i.a.createElement("select",{className:"gen-mains-select",value:h,onChange:this.handleSelectMainGen},i.a.createElement("option",{value:""}),u))),i.a.createElement("div",{className:"tool-box"},i.a.createElement("button",{className:"remove",onClick:this.handleRemove},i.a.createElement(B.a,{icon:z.faMinusCircle})),i.a.createElement("button",{className:L()("search",{enable:n}),onClick:this.handleSearch},i.a.createElement(B.a,{icon:ee.faSearch}))))}}a(132);class ae extends i.a.PureComponent{constructor(...e){super(...e),this.handleActive=e=>{e.stopPropagation();const{index:t,onActive:a}=this.props;a(t)},this.handleRemove=e=>{e.stopPropagation();const{index:t,onRemoveDeck:a}=this.props;a(t)},this.handleSearch=e=>{e.stopPropagation();const{index:t,onToggleSearch:a,deckCard:n}=this.props;a(t,n)},this.handleChangeDeckValue=e=>{const{index:t,setDeckValue:a}=this.props,n=e.currentTarget.name;let s=e.currentTarget.value;""===s&&(s=void 0),a(t,{[n]:s})}}render(){const{deckCard:e,active:t,search:a,belongStates:n,costs:s,unitTypes:r}=this.props,c={},l={},o=e.belongState?n.find(t=>t.id===e.belongState):void 0,d=e.cost?s.find(t=>t.id===e.cost):void 0,m=e.unitType?r.find(t=>t.id===e.unitType):void 0;let u="",h="",p=!1;o&&(c.backgroundColor=o.thincolor,l.backgroundColor=o.color,u=o.id,h=o.nameShort||"",p=!0);let g="";d&&(g=d.name);const E={};let C="",f="";m?(C=m.id,f=m.nameShort||""):E.display="none";const v=[];n.forEach((e,t)=>{v.push(i.a.createElement("option",{value:e.id,key:t},e.name))});const k=[];s.forEach((e,t)=>{k.push(i.a.createElement("option",{value:e.id,key:t},e.name))});const N=[];return r.forEach((e,t)=>{N.push(i.a.createElement("option",{value:e.id,key:t},e.nameShort||e.name))}),i.a.createElement("div",{className:L()("deck-dummy-card",{"has-state":p,active:t}),style:c,onClick:this.handleActive},i.a.createElement("div",{className:"deck-card-inner-top",style:l},i.a.createElement("span",{className:"state"},h),i.a.createElement("span",{className:"cost","data-label":"コスト"},g),i.a.createElement("span",{className:"unit",style:E,"data-label":"兵種"},f),i.a.createElement("div",{className:"edit"},i.a.createElement("span",{className:"select-item-container","data-label":"勢力"},i.a.createElement("select",{className:"select-item",name:"belongState",value:u,onChange:this.handleChangeDeckValue},i.a.createElement("option",{value:""}),v)),i.a.createElement("span",{className:"select-item-container","data-label":"コスト"},i.a.createElement("select",{className:"select-item",name:"cost",value:e.cost,onChange:this.handleChangeDeckValue},k)),i.a.createElement("span",{className:"select-item-container","data-label":"兵種"},i.a.createElement("select",{className:"select-item",name:"unitType",value:C,onChange:this.handleChangeDeckValue},i.a.createElement("option",{value:""}),N)))),i.a.createElement("div",{className:"deck-card-inner-bottom"},i.a.createElement("div",{className:"tool-box"},i.a.createElement("button",{className:"remove",onClick:this.handleRemove},i.a.createElement(B.a,{icon:z.faMinusCircle})),i.a.createElement("button",{className:L()("search",{enable:a}),onClick:this.handleSearch},i.a.createElement(B.a,{icon:ee.faSearch})))))}}var ne=Object(o.b)(e=>({generals:e.datalistReducer.generals,belongStates:e.datalistReducer.filterContents.belongStates,costs:e.datalistReducer.filterContents.costs,unitTypes:e.datalistReducer.filterContents.unitTypes}),e=>Object(d.a)({setDeckDummyValue:y.setDeckDummyValue},e),(e,t,a)=>({...e,...{setDeckValue:t.setDeckDummyValue},...a}))(ae);class se extends i.a.Component{render(){return i.a.createElement("div",{className:"deck-board"},this.renderAssistDeckCardList(),this.renderDeckCardList(),this.renderDeckTotal())}renderAssistDeckCardList(){const{assistDeckCards:e,activeAssistIndex:t,setActiveAssistCard:a,removeDeckAssist:n}=this.props,s=[];e.forEach((e,r)=>{const c=t===r;s.push(i.a.createElement(Z,{key:r,index:r,assist:e.assist,active:c,onActive:a,onRemoveDeck:n}))});const r={};return 0===e.length&&(r.display="none"),i.a.createElement("div",{className:"assist-deck-card-list",style:r},s)}renderDeckCardList(){const{deckCards:e,activeIndex:t,enableSearch:a,enabledAddDeck:n,addDeckDummy:s,clearDeck:r,openDeckConfig:c,selectMainGen:l,setActiveCard:o,removeDeck:d,toggleSearch:m}=this.props,u=[];return e.forEach((e,n)=>{const s=t===n;if("general"in e){const{general:t,genMain:r,pocket:c}=e;u.push(i.a.createElement(te,{key:n,index:n,active:s,search:s&&a,genMain:r,general:t,pocket:c,onSelectMainGen:l,onActive:o,onRemoveDeck:d,onToggleSearch:m}))}else u.push(i.a.createElement(ne,{key:n,index:n,active:s,search:s&&a,deckCard:e,onActive:o,onRemoveDeck:d,onToggleSearch:m}))}),i.a.createElement("div",{className:"deck-card-list"},u,i.a.createElement("div",{className:"deck-actions"},i.a.createElement("div",{className:L()("add-new-deck-card","button",{disabled:!n}),onClick:s},"追加",i.a.createElement(B.a,{icon:X.faPlusCircle})),i.a.createElement("div",{className:"deck-clear button",onClick:r},"クリア"),i.a.createElement("div",{className:"open-deck-config button",onClick:c},i.a.createElement(B.a,{icon:J.faCog}))))}renderDeckTotal(){const{totalForce:e,totalIntelligence:t,intelligenceByMainGen:a,totalConquest:n,conquestByMainGen:s,conquestRank:r,totalCost:c,limitCost:l,maxMorale:o,maxMoraleByMainGen:d,tolalMoraleByCharm:m,tolalMoraleByMainGen:u,hasDummy:h,hasStateDummy:p}=this.props;let g=c-l,E="残り",C=!1,f=!1;g>0?(E="コストオーバー",C=!0):g<0&&(g*=-1,f=!0);const v=(m+u)/100,k=m/100,N=u/100;return i.a.createElement("div",{className:"deck-total"},i.a.createElement("div",{className:"total","data-label":"総武力"},i.a.createElement("span",{className:L()("force",{dummy:h})},e)),i.a.createElement("div",{className:"total","data-label":"総知力"},i.a.createElement("span",{className:L()("has-gen-main",{active:a>0})},"将器込み"),i.a.createElement("span",{className:L()("intelligence",{dummy:h})},t,i.a.createElement("span",{className:L()("breakdown",{active:a>0})},"(",t-a,i.a.createElement("span",{className:"addition-by-main-gen"},"+",a),")"))),i.a.createElement("div",{className:"total","data-label":"総征圧力"},i.a.createElement("span",{className:L()("has-gen-main",{active:s>0})},"将器込み"),i.a.createElement("span",{className:L()("conquest-rank",{dummy:h})},r),i.a.createElement("span",{className:L()("conquest",{dummy:h})},n,i.a.createElement("span",{className:L()("breakdown",{active:s>0})},"(",n-s,i.a.createElement("span",{className:"addition-by-main-gen"},"+",s),")"))),i.a.createElement("div",{className:"total total-cost","data-label":"総コスト"},i.a.createElement("span",{className:"cost"},(c/10).toFixed(1)),i.a.createElement("span",{className:L()("cost-remain",{over:C,under:f})},"(",E," ",(g/10).toFixed(1),")")),i.a.createElement("div",{className:"total","data-label":"最大士気"},i.a.createElement("span",{className:L()("has-gen-main",{active:d>0})},"将器込み"),i.a.createElement("span",{className:L()("max-morale",{dummy:p})},o,i.a.createElement("span",{className:L()("breakdown",{active:d>0})},"(",o-d,i.a.createElement("span",{className:"addition-by-main-gen"},"+",d),")"))),i.a.createElement("div",{className:"total","data-label":"開幕士気"},i.a.createElement("span",{className:L()("has-gen-main",{active:N>0})},"将器込み"),i.a.createElement("span",{className:"start-morale"},v,i.a.createElement("span",{className:L()("breakdown",{active:N>0})},"(",k,i.a.createElement("span",{className:"addition-by-main-gen"},"+",N),")"))))}}var re=function(e,t=null){return e.length-(null!=t?1:0)<8};var ie=Object(o.b)(e=>({deckCards:e.deckReducer.deckCards,assistDeckCards:e.deckReducer.assistDeckCards,enableSearch:null!=e.deckReducer.searchCondition,activeIndex:e.deckReducer.activeIndex,activeAssistIndex:e.deckReducer.activeAssistIndex,generals:e.datalistReducer.generals,assistGenerals:e.datalistReducer.assistGenerals,filterContents:e.datalistReducer.filterContents,limitCost:e.deckReducer.deckConstraints.limitCost,assistCardLimit:e.deckReducer.deckConstraints.assistCardLimit}),e=>Object(d.a)({openDeckConfig:g.openDeckConfig,selectMainGen:y.selectMainGen,setActiveCard:y.setActiveCard,removeDeck:y.removeDeck,rawAddDeckDummy:y.addDeckDummy,setActiveAssistCard:y.setActiveAssistCard,removeDeckAssist:y.removeDeckAssist,clearDeck:y.clearDeck,searchByDeck:y.searchByDeck,resetPage:k.resetPage,showDialog:D.showDialog},e),(e,t)=>{const{deckCards:a,assistDeckCards:n,enableSearch:s,activeIndex:r,activeAssistIndex:i,generals:c,assistGenerals:l,limitCost:o,assistCardLimit:d}=e,{rawAddDeckDummy:m,clearDeck:u,searchByDeck:h,resetPage:p,showDialog:g,...E}=t,C=re(a);let f=0,v=0,k=0,N=0,b=!1,y=!1;const A=[],S=[],D=new Set,I=new Map,T=new Map;if(a.forEach(e=>{let t;if("general"in e){const a=null!=e.general?c.find(t=>t.id===e.general):void 0;if(!a)return;f+=a.force,v+=a.intelligence,k+=a.conquest,t=a.raw.cost,D.add(a.raw.state);const n=e.genMain;if(null!=n){const e=a.genMains.find(e=>e.id===n);if(e){const t=I.get(e.name)||0;I.set(e.name,t+1)}}a.skills.forEach(e=>{const t=T.get(e.name)||0;T.set(e.name,t+1)}),A.push({general:a,genMain:n,pocket:e.pocket})}else b=!0,t=e.cost,e.belongState?D.add(e.belongState):y=!0,A.push(e);N+=parseInt(t)}),n.forEach(({assist:e})=>{const t=l.find(t=>t.id===e);t&&S.length<d&&(S.push({assist:t}),D.add(t.raw.state))}),S.length<d){const e=d-S.length;for(let t=0;t<e;t++)S.push({assist:null})}const O=D.size+(y?1:0);let _;1===O?_=12:2===O?_=9:(y=!1,_=6);const R=40*(T.get("魅力")||0);let w;w=k>=11?"S":k>=9?"A":k>=7?"B":"C";let M=2*(I.get("同盟者")||0);_+M>=12?(M=12-_,_=12):_+=M;const P=40*(I.get("士気上昇")||0),G=3*(I.get("知力上昇")||0);v+=G;const V=1*(I.get("征圧力上昇")||0);k+=V;return{...{deckCards:A,assistDeckCards:S,activeIndex:r,activeAssistIndex:i,enabledAddDeck:C,enableSearch:s,totalForce:f,totalIntelligence:v,intelligenceByMainGen:G,totalConquest:k,conquestByMainGen:V,conquestRank:w,totalCost:N,limitCost:o,maxMorale:_,maxMoraleByMainGen:M,tolalMoraleByCharm:R,tolalMoraleByMainGen:P,hasDummy:b,hasStateDummy:y},...{...E,addDeckDummy:()=>{if(!C)return;let e,t,a="10";const{costs:n,belongStates:s,unitTypes:r}=x.getState().datalistReducer.filterCondition.basic;n.length>=1&&(a=[...n].sort()[0]),1===s.length&&(e=s[0]),1===r.length&&(t=r[0]),m({cost:a,belongState:e,unitType:t})},clearDeck:()=>{A.length>0&&g({title:"デッキクリア",message:"デッキをクリアします。",redText:"クリア",actionRed:()=>{u()},blueText:"キャンセル",actionBlue:()=>{}})},toggleSearch:(e,t)=>{p(),r===e&&s?E.setActiveCard(e):h(e,t)}}}},{areMergedPropsEqual:()=>!1})(se);const ce=()=>{return e=0,new Promise(t=>setTimeout(t,e));var e};a(133);class le extends i.a.PureComponent{constructor(...e){super(...e),this.scrollArea=i.a.createRef(),this.handleOnPagePrev=e=>{e.stopPropagation(),this.props.onPagePrev()},this.handleOnPageNext=e=>{e.stopPropagation(),this.props.onPageNext()},this.handleOnScroll=()=>{Object(m.forceCheck)()}}componentDidUpdate(e){const t=this.isChangedList(e),a=this.scrollArea.current;t&&a&&(a.scrollTop=0),Object(m.forceCheck)()}extraPartRender(){return i.a.createElement(i.a.Fragment,null)}render(){const{count:e,searchedAll:t,searchedOffset:a,searchedLimit:n,hasPrev:s,hasNext:r,show:c}=this.props,l=this.createCardElements();0===e&&l.push(i.a.createElement("div",{key:-1,className:"no-generals"},"該当なし"));const o=t>0?a+1:0;let d=a+n;d>t&&(d=t);const m={};return c||(m.display="none"),i.a.createElement("div",{className:"cardlist-container",style:m,onScroll:this.handleOnScroll},this.extraPartRender(),i.a.createElement("div",{className:"cardlist-paging"},i.a.createElement("button",{className:L()("paging-button","prev",{active:s}),onClick:this.handleOnPagePrev},"< 前"),i.a.createElement("div",{className:"pageing-label"},"全",t,"件 ",o," - ",d,"件"),i.a.createElement("button",{className:L()("paging-button","next",{active:r}),onClick:this.handleOnPageNext},"次 >")),i.a.createElement("div",{className:"cardlist-main",ref:this.scrollArea},l))}}a(134);var oe=a(27);class de extends i.a.PureComponent{constructor(...e){super(...e),this.handleAddDeckClick=e=>{const{general:t,onAddDeck:a}=this.props;e.stopPropagation();const n=e.currentTarget.dataset.genMain;a({general:t.id,genMain:n,pocket:!1})}}render(){const{general:e,enabledAddDeck:t}=this.props,a=[];return e.genMains.forEach((e,n)=>{a.push(i.a.createElement("button",{className:"gen-main",key:n,disabled:!t,"data-gen-main":e.id,onClick:this.handleAddDeckClick},e.nameShort,i.a.createElement(B.a,{className:"add-icon",icon:X.faPlusCircle}),i.a.createElement(B.a,{className:"change-icon",icon:oe.faSyncAlt})))}),i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"gen-mains","data-label":"主将器"},a),i.a.createElement("span",{className:"buttons"},i.a.createElement("button",{className:"add-deck",disabled:!t,onClick:this.handleAddDeckClick},i.a.createElement(B.a,{className:"add-icon",icon:X.faPlusCircle}),i.a.createElement(B.a,{className:"change-icon",icon:oe.faSyncAlt}))))}}var me=Object(o.b)(e=>({generals:e.datalistReducer.generals,assistGenerals:e.datalistReducer.assistGenerals,deckCards:e.deckReducer.deckCards,assistDeckCards:e.deckReducer.assistDeckCards,assistCardLimit:e.deckReducer.deckConstraints.assistCardLimit,activeIndex:e.deckReducer.activeIndex,activeAssistIndex:e.deckReducer.activeAssistIndex,sameCard:e.deckReducer.deckConstraints.sameCard}),e=>Object(d.a)({addDeckGeneral:y.addDeckGeneral,changeDeckGeneral:y.changeDeckGeneral},e),(e,t,a)=>{const{deckCards:n,assistDeckCards:s,activeIndex:r,activeAssistIndex:i,sameCard:c}=e,{general:l}=a,o=function(e,t){const{generals:a,activeIndex:n}=e,s=[];return t.forEach((e,t)=>{n!==t&&"general"in e&&s.push(e.general)}),a.filter(e=>s.includes(e.id)).map(e=>{const{personal:t,strat:a}=e.raw;return{personal:t,strat:a}})}(e,n),d=function(e,t){const{assistGenerals:a,assistCardLimit:n}=e,s=t.filter((e,t)=>t<n).map(e=>e.assist);return a.filter(e=>s.includes(e.id)).map(e=>e.raw.personal)}(e,s),m=null==i&&re(n,r)&&function(e,t,a,n){if("personal-strategy"!==n&&"personal-assist"!==n){if(a.some(t=>t===e.raw.personal))return!1}return"personal-strategy"===n||"personal-strategy-exclude-assist"===n?!t.some(t=>t.personal===e.raw.personal&&t.strat===e.raw.strat):!t.some(t=>t.personal===e.raw.personal)}(l,o,d,c);return{...{enabledAddDeck:m},...{onAddDeck:e=>{m&&(null!=r?t.changeDeckGeneral(r,e):t.addDeckGeneral(e))}},...a}},{areMergedPropsEqual:(e,t)=>!e.show&&!t.show})(de);class ue extends i.a.PureComponent{render(){const{genMains:e,officialUrl:t}=this.props,a=[];return e.forEach((e,t)=>{a.push(i.a.createElement("span",{className:"gen-main-readonly",key:t},e.nameShort))}),i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"gen-mains","data-label":"主将器"},a),i.a.createElement("span",{className:"externals"},i.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},"公式",i.a.createElement("br",null),"サイトへ",i.a.createElement(B.a,{icon:K.faExternalLinkAlt}))))}}class he extends i.a.PureComponent{constructor(...e){super(...e),this.handleGeneralClick=()=>{const{general:e,onShowDetail:t}=this.props;t&&t(e)}}render(){const{general:e,show:t,showStrategyExplanation:a,showAddButtons:n}=this.props,s=n,r={backgroundColor:e.state.thincolor},c={backgroundColor:e.state.color};null==t||t||(r.display="none");const l=[];e.skills.forEach(e=>{l.push(i.a.createElement("span",{className:"skill",key:e.id},e.nameShort))}),0===l.length&&l.push(i.a.createElement("span",{className:"no-skill",key:0},"特技なし"));const o=e.strategy.name,d=e.strategy.stratCategoryName,m=e.strategy.morale,h=e.strategy.explanation,p=[];h.split("\n").forEach((e,t)=>{p.push(i.a.createElement("span",{key:t},e))});const g=n?i.a.createElement(me,{general:e,show:t}):i.a.createElement(ue,{genMains:e.genMains,officialUrl:e.officialUrl});return i.a.createElement("div",{className:L()("general-card",{clickable:s}),style:r,onClick:this.handleGeneralClick},i.a.createElement("span",{className:"state",style:c},e.state.nameShort),i.a.createElement("span",{className:"version"},e.version),i.a.createElement("span",{className:"rarity"},e.rarity.name),i.a.createElement("span",{className:"name"},e.name),i.a.createElement("span",{className:"image"},i.a.createElement(u.a,{height:64,once:!0,scroll:!1,resize:!1,placeholder:i.a.createElement("div",{className:"no-image general-thumb"})},i.a.createElement("img",{className:"general-thumb",src:e.avatarUrl(!1)}))),i.a.createElement("span",{className:"cost","data-label":"コスト"},e.cost.name),i.a.createElement("span",{className:"unit","data-label":"兵種"},e.unitType.nameShort),i.a.createElement("span",{className:"force","data-label":"武"},e.force),i.a.createElement("span",{className:"intelligence","data-label":"知"},e.intelligence),i.a.createElement("span",{className:"conquest","data-label":"制圧"},e.conquest),i.a.createElement("span",{className:"skills"},l),i.a.createElement("span",{className:L()("strategy",{show:!a}),"data-label":"計略名",title:h},o),i.a.createElement("span",{className:L()("strategy-category",{show:!a})},"[",d,"]"),i.a.createElement("span",{className:L()("strategy-explanation",{show:a})},p),i.a.createElement("span",{className:"strategy-morale","data-label1":"必要","data-label2":"士気"},m),g)}}a(48);var pe=a(36),ge=a(38);function Ee(e,t){if(null==e)return!1;return t.split(/\s+/g).filter(e=>e.length>0).every(t=>e.includes(t))}var Ce=(e,t)=>{const{moraleMin:a,moraleMax:n,strategyCategories:s,strategyRanges:r,strategyTimes:i,strategySearchName:c,strategySearchExplanation:l}=t;return!(a>e.morale)&&(!(n<e.morale)&&(!(s.length>0&&!s.includes(e.stratCategory))&&(!(r.length>0&&!r.includes(e.stratRange))&&(!(i.length>0&&!i.includes(e.stratTime))&&(!(c.length>0&&!Ee(e.name,c)&&(o=e.nameRuby,d=c,null==o||!d.split(/\s+/g).filter(e=>e.length>0).map(e=>Object(pe.a)(Object(ge.a)(e),!0).replace(/[ﾞﾟ]/g,"")).every(e=>o.includes(e))))&&!(l.length>0&&!Ee(e.explanation,l)))))));var o,d};var fe=(e,t)=>{const{belongStates:a,costs:n,unitTypes:s,forceMin:r,forceMax:i,useCostRatioForce:c,costRatioForceMin:l,costRatioForceMax:o,costRatioBaseForces:d,intelligenceMin:m,intelligenceMax:u,conquestMin:h,conquestMax:p,skills:g,skillsAnd:E,searchText:C}=t.basic,{raw:f}=e;if(a.length>0&&!a.includes(f.state))return!1;if(n.length>0&&!n.includes(f.cost))return!1;if(s.length>0&&!s.includes(f.unit_type))return!1;if(c){const t=d[e.raw.cost];if(null==t)return!1;const a=e.force-t;if(l>a)return!1;if(o<a)return!1}else{if(r>e.force)return!1;if(i<e.force)return!1}if(m>e.intelligence)return!1;if(u<e.intelligence)return!1;if(h>e.conquest)return!1;if(p<e.conquest)return!1;if(g.length>0){const t=t=>"0"===t?0===e.skills.length:e.skills.map(e=>e.id).includes(t);if(E){if(!g.every(t))return!1}else if(!g.some(t))return!1}const{genMains:v,genMainsAnd:k,rarities:N,generalTypes:b,varTypes:y,versions:A,majorVersions:S,enableDetailVersion:D,pockets:I}=t.detail;if(N.length>0&&!N.includes(f.rarity))return!1;if(D){if(A.length>0&&!A.includes(e.versionValue))return!1}else if(S.length>0&&!S.includes(f.major_version))return!1;if(v.length>0){const t=t=>e.genMains.map(e=>e.id).includes(t);if(k){if(!v.every(t))return!1}else if(!v.some(t))return!1}if(b.length>0&&!b.includes(f.general_type))return!1;if(y.length>0&&!y.includes(f.ver_type))return!1;if(1===I.length&&"1"===I[0]!=(""!==f.pocket_code))return!1;if(C.length>0){if(null==e.personal)return!1;if(!function(e,t){return null!=e&&t.split(/\s+/g).filter(e=>e.length>0).some(t=>e.includes(t))}(e.personal.name,C)&&!function(e,t){return null!=e&&t.split(/\s+/g).filter(e=>e.length>0).map(e=>Object(pe.a)(Object(ge.a)(e),!0).replace(/[ﾞﾟ]/g,"")).some(t=>e.includes(t))}(e.personal.name_ruby,C))return!1}return!0};const ve={areMergedPropsEqual:(e,t)=>{return e.show===t.show&&(e.showStrategyExplanation===t.showStrategyExplanation&&(e.searchedAll===t.searchedAll&&(e.searchedOffset===t.searchedOffset&&(a=e.searchedGeneralIds,n=t.searchedGeneralIds,!(a.length!==n.length||!a.every(e=>n.includes(e)))))));var a,n}};var ke=Object(o.b)(e=>({generals:e.datalistReducer.generals,strategies:e.datalistReducer.strategies,currentPage:e.datalistReducer.currentPage,pageLimit:e.datalistReducer.pageLimit,filterCondition:e.datalistReducer.effectiveFilterCondition,deckSearchCondition:e.deckReducer.searchCondition}),e=>Object(d.a)({decrementPage:k.decrementPage,incrementPage:k.incrementPage,openGeneralDetail:g.openGeneralDetail},e),(e,t)=>{const{generals:a,strategies:n,currentPage:s,pageLimit:r,filterCondition:i,deckSearchCondition:c}=e;let l=i;c&&(l={...l,basic:{...l.basic}},null!=c.belongState&&(l.basic.belongStates=[c.belongState]),l.basic.costs=[c.cost],null!=c.unitType&&(l.basic.unitTypes=[c.unitType]));const o=n.filter(e=>Ce(e,l.strategies));let d=[];if(o.length>0){const e=o.length!==n.length?o.map(e=>e.id):void 0;d=a.filter(t=>!(e&&!e.includes(t.strategy.id))&&fe(t,l)).map(e=>e.id)}const m=d.length,u=(s-1)*r,h=u>0,p=u+r<m;d=d.slice(u,u+r);return{...{generals:a,count:d.length,searchedGeneralIds:d,searchedAll:m,searchedOffset:u,searchedLimit:r,hasPrev:h,hasNext:p,show:"general"===l.basic.searchMode,showStrategyExplanation:l.strategies.showStrategyExplanation},...{onPagePrev:t.decrementPage,onPageNext:t.incrementPage,showGeneralDetail:t.openGeneralDetail}}},ve)(class extends le{constructor(...e){super(...e),this.state={renderingCount:0},this.handleOnShowDetail=e=>{this.props.showGeneralDetail(e)}}async componentDidUpdate(e){const{generals:t}=this.props;if(t.length!==e.generals.length){const e=25;await ce();for(let a=0;a<t.length;a+=e)this.setState({renderingCount:a}),await ce();this.setState({renderingCount:t.length})}}extraPartRender(){const e=this.props.generals.length,t=this.state.renderingCount;return e===t?i.a.createElement(i.a.Fragment,null):i.a.createElement("div",{className:"reading-generals"},"武将読み込み中 ",t,"/",e)}createCardElements(){const{generals:e,searchedGeneralIds:t,showStrategyExplanation:a}=this.props,{renderingCount:n}=this.state,s=[];return e.forEach((e,r)=>{if(n<=r)return;const c=t.includes(e.id);s.push(i.a.createElement(he,{key:e.id,general:e,onShowDetail:this.handleOnShowDetail,show:c,showStrategyExplanation:a,showAddButtons:!0}))}),s}isChangedList(e){const t=this.props.searchedGeneralIds,a=e.searchedGeneralIds;return!(t.length===a.length&&t.every(e=>a.includes(e)))}});a(146);class Ne extends i.a.PureComponent{constructor(...e){super(...e),this.handleAddDeckClick=e=>{const{assist:t,onAddDeck:a}=this.props;e.stopPropagation(),a({assist:t.id})}}render(){const{enabledAddDeck:e}=this.props;return i.a.createElement("span",{className:"buttons"},i.a.createElement("button",{className:"add-deck",disabled:!e,onClick:this.handleAddDeckClick},i.a.createElement(B.a,{className:"add-icon",icon:X.faPlusCircle}),i.a.createElement(B.a,{className:"change-icon",icon:oe.faSyncAlt})))}}var be=Object(o.b)(e=>({generals:e.datalistReducer.generals,assistGenerals:e.datalistReducer.assistGenerals,deckCards:e.deckReducer.deckCards,assistDeckCards:e.deckReducer.assistDeckCards,assistCardLimit:e.deckReducer.deckConstraints.assistCardLimit,activeIndex:e.deckReducer.activeIndex,activeAssistIndex:e.deckReducer.activeAssistIndex,sameCard:e.deckReducer.deckConstraints.sameCard}),e=>Object(d.a)({addDeckAssist:y.addDeckAssist,changeDeckAssist:y.changeDeckAssist},e),(e,t,a)=>{const{deckCards:n,assistDeckCards:s,activeIndex:r,activeAssistIndex:i,sameCard:c,assistCardLimit:l}=e,{assist:o}=a,d=function(e,t){const{generals:a,activeIndex:n}=e,s=[];return t.forEach((e,t)=>{n!==t&&"general"in e&&s.push(e.general)}),a.filter(e=>s.includes(e.id)).map(e=>e.raw.personal)}(e,n),m=function(e,t){const{assistGenerals:a,assistCardLimit:n}=e,s=t.filter((e,t)=>t<n).map(e=>e.assist);return a.filter(e=>s.includes(e.id)).map(e=>e.raw.personal)}(e,s),u=null==r&&function(e,t,a=null){return 0!==t&&(null!==a||e.filter((e,a)=>a<t).map(e=>e.assist).length<t)}(s,l,i)&&function(e,t,a,n){return!a.some(t=>t===e.raw.personal)&&("personal-strategy"===n||"personal-assist"===n||!t.some(t=>t===e.raw.personal))}(o,d,m,c);return{...{enabledAddDeck:u},...{onAddDeck:e=>{u&&(null!=i&&s.length>i?t.changeDeckAssist(i,e):t.addDeckAssist(e))}},...a}},{areMergedPropsEqual:(e,t)=>!e.show&&!t.show})(Ne);function ye(e){return"https://3594t.net/img/strat_range/".concat(e,".png")}class Ae extends i.a.PureComponent{constructor(...e){super(...e),this.handleAssistGeneralClick=()=>{const{general:e,onShowDetail:t}=this.props;t&&t(e)}}render(){var e,t;const{general:a,show:n,showStrategyExplanation:s,showAddButtons:r}=this.props,c={backgroundColor:a.state.thincolor},l={backgroundColor:a.state.color};null==n||n||(c.display="none");const o=a.strategy.name,d=(null===(e=a.strategy.category)||void 0===e?void 0:e.name)||"",m=a.strategy.explanation,h=[];m.split("\n").forEach((e,t)=>{h.push(i.a.createElement("span",{key:t},e))});const p=null===(t=a.strategy.range)||void 0===t?void 0:t.code,g=p?ye(p):"",E=r?i.a.createElement(be,{assist:a,show:n}):i.a.createElement(i.a.Fragment,null);return i.a.createElement("div",{className:L()("assist-general-card",{clickable:!1}),style:c,onClick:this.handleAssistGeneralClick},i.a.createElement("span",{className:"state",style:l},a.state.nameShort),i.a.createElement("span",{className:"version"},a.version),i.a.createElement("span",{className:"rarity"},"遊軍"),i.a.createElement("span",{className:"name"},a.name),i.a.createElement("span",{className:"image"},i.a.createElement(u.a,{height:64,once:!0,scroll:!1,resize:!1,placeholder:i.a.createElement("div",{className:"no-image general-thumb"})},i.a.createElement("img",{className:"general-thumb",src:a.avatarUrl}))),i.a.createElement("span",{className:L()("strategy",{show:!s}),"data-label":"戦技名",title:m},o),i.a.createElement("span",{className:L()("strategy-category",{show:!s})},"[",d,"]"),i.a.createElement("span",{className:L()("strategy-explanation",{show:s})},h),i.a.createElement("span",{className:"strategy-range","data-label":"効果範囲"},i.a.createElement("img",{className:"range-image",src:g})),E)}}const Se={areMergedPropsEqual:(e,t)=>{return e.show===t.show&&(e.showStrategyExplanation===t.showStrategyExplanation&&(e.searchedAll===t.searchedAll&&(e.searchedOffset===t.searchedOffset&&(a=e.searchedAssistGeneralIds,n=t.searchedAssistGeneralIds,!(a.length!==n.length||!a.every(e=>n.includes(e)))))));var a,n}};var De=Object(o.b)(e=>({assistGenerals:e.datalistReducer.assistGenerals,currentPage:e.datalistReducer.currentPage,pageLimit:e.datalistReducer.pageLimit,belongStates:e.datalistReducer.effectiveFilterCondition.basic.belongStates,enableSearchByDeck:null!=e.deckReducer.searchCondition,searchMode:e.datalistReducer.effectiveFilterCondition.basic.searchMode}),e=>Object(d.a)({decrementPage:k.decrementPage,incrementPage:k.incrementPage,openAssistGeneralDetail:g.openAssistGeneralDetail},e),(e,t)=>{const{assistGenerals:a,currentPage:n,pageLimit:s,belongStates:r,enableSearchByDeck:i,searchMode:c}=e;let l=[];i||(l=a.filter(e=>!(r.length>0&&!r.includes(e.raw.state))).map(e=>e.id));const o=l.length,d=(n-1)*s,m=d>0,u=d+s<o;l=l.slice(d,d+s);return{...{assistGenerals:a,count:l.length,searchedAssistGeneralIds:l,searchedAll:o,searchedOffset:d,searchedLimit:s,hasPrev:m,hasNext:u,show:"assist"===c,showStrategyExplanation:!1},...{onPagePrev:t.decrementPage,onPageNext:t.incrementPage,showGeneralDetail:t.openAssistGeneralDetail}}},Se)(class extends le{constructor(...e){super(...e),this.handleOnShowDetail=e=>{this.props.showGeneralDetail(e)}}createCardElements(){const{assistGenerals:e,searchedAssistGeneralIds:t,showStrategyExplanation:a}=this.props,n=[];return e.forEach(e=>{const s=t.includes(e.id);n.push(i.a.createElement(Ae,{key:e.id,general:e,onShowDetail:this.handleOnShowDetail,show:s,showStrategyExplanation:a,showAddButtons:!0}))}),n}isChangedList(e){const t=this.props.searchedAssistGeneralIds,a=e.searchedAssistGeneralIds;return!(t.length===a.length&&t.every(e=>a.includes(e)))}});let Ie;function Te(e){return t=>{e(k.setBasicCondition(t)),clearTimeout(Ie),Ie=setTimeout(()=>{e(k.applyCondition())},500)}}function xe(e){return t=>{e(k.setDetailCondition(t)),clearTimeout(Ie),Ie=setTimeout(()=>{e(k.applyCondition())},500)}}function Oe(e){return t=>{e(k.setStrategiesCondition(t)),clearTimeout(Ie),Ie=setTimeout(()=>{e(k.applyCondition())},500)}}const _e=({filterContents:e,filterCondition:t,value:a,checked:n})=>{let s=t.filter(e=>!e.startsWith("".concat(a,"-")));if(!n){const t=[].concat(...e).filter(e=>e.id.startsWith("".concat(a,"-")));s=s.concat(t.map(e=>e.id))}return s},Re=(e,t,a,n,s)=>{let r=[...t];const i=n.split("-")[0];if(s)a.some(e=>e.startsWith("".concat(i,"-")))||(r=r.filter(e=>e!==i));else if(!r.includes(i)){[].concat(...e).filter(e=>e.id.startsWith("".concat(i,"-"))).every(e=>a.includes(e.id))&&r.push(i)}return r};function we(e,t){const a=t.includes(e);let n;return n=a?t.filter(t=>t!==e):[...t,e],{checked:a,targetValue:n}}function Me(e,t,a){const n=e[t];if(!(n instanceof Array))return console.warn("".concat(t," is not array.")),{};const{targetValue:s}=we(a,n);return{[t]:s}}a(147),a(148);const Pe=["button","filter-item"];class Ge extends i.a.PureComponent{constructor(e){super(e),this.buttonClasses=void 0,this.square=void 0,this.handleClickItem=e=>{const t=e.currentTarget.value,{itemName:a,onClickItem:n}=this.props;n(a,t)},this.buttonClasses=e.addtionalClasses?[...Pe,...e.addtionalClasses]:Pe,this.square=this.props.square||!1}createLabel(e){return e.nameShort||e.name}createButton(e,t,a,n,s){return i.a.createElement("button",{key:e,value:e,style:a,className:s,disabled:n,onClick:this.handleClickItem},t)}render(){const{checkedItems:e,items:t,show:a,disabled:n}=this.props,s=this.square,r=[],c=null!=n&&n;t.forEach(t=>{const a=t.id,n=this.createLabel(t),i={};t.color&&(i.backgroundColor=t.color);const l=e.includes(a);r.push(this.createButton(a,n,i,c,L()(this.buttonClasses,{checked:l,square:s})))});const l={};return null==a||a||(l.display="none"),i.a.createElement("div",{className:"button-list",style:l},r)}}class Ve extends i.a.Component{constructor(...e){super(...e),this.handleToggleCheckList=(e,t)=>{this.props.toggleCheckList(e,t)},this.handleOnClickToggleSearchMode=()=>{const{searchMode:e,setCondition:t}=this.props;t({searchMode:"general"===e?"assist":"general"})}}render(){const{filterContents:e,filterCondition:t,searchByDeck:a,searchMode:n}=this.props,s="general"===n;return i.a.createElement("section",{className:"simple-filter-section"},i.a.createElement("div",{className:"simple-filter-state"},i.a.createElement("h2",{className:"title-inline"},"勢力"),i.a.createElement(Ge,{itemName:"belongStates",items:e,checkedItems:t,onClickItem:this.handleToggleCheckList,square:!0,disabled:a})),i.a.createElement("div",{className:L()("search-mode",{"mode-general":s}),onClick:this.handleOnClickToggleSearchMode},i.a.createElement("span",{className:"mode-item mode-item-general"},"武将"),i.a.createElement("span",{className:"mode-item mode-item-assist"},"遊軍")))}}var je=Object(o.b)(e=>{const{searchCondition:t}=e.deckReducer,a=t?t.belongState:void 0;return{belongStates:e.datalistReducer.filterContents.belongStates,basicFilterCondition:e.datalistReducer.filterCondition.basic,deckCardBelongState:a}},e=>({setCondition:Te(e)}),(e,t)=>{const{deckCardBelongState:a,belongStates:n,basicFilterCondition:s}=e;let r=!1,i=s.belongStates;null!=a&&(r=!0,i=[a]);return{...{filterContents:n,filterCondition:i,searchByDeck:r,searchMode:s.searchMode},...{setCondition:t.setCondition,toggleCheckList:(e,a)=>{t.setCondition(Me(s,e,a))}}}},{areMergedPropsEqual:()=>!1})(Ve);a(149),a(150);class Le extends Ge{createButton(e,t,a,n,s){return"0"!==e?super.createButton(e,t,a,n,s):super.createButton(e,"無",a,n,L()(s,"no-skill"))}}a(151);class Be extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnChange=()=>{const{isOn:e,itemName:t,onChangeValue:a}=this.props;a(t,!e)}}render(){const{isOn:e,labelOff:t,labelOn:a,width:n}=this.props,s={};return null!=n&&(s.width=n),L()("switch-button",{active:e}),i.a.createElement("div",{style:s,className:"switch-item",onClick:this.handleOnChange},i.a.createElement("div",{className:L()("switch-button",{active:!e})},i.a.createElement("button",{className:"switch-button-child"},t)),i.a.createElement("div",{className:L()("switch-button",{active:e})},i.a.createElement("button",{className:"switch-button-child"},a)))}}a(152);class Fe extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnChange=e=>{const t=parseFloat(e.currentTarget.value),{itemName:a,onChangeValue:n}=this.props;n(a,t)}}render(){const{min:e,max:t,value:a,className:n,displayText:s,step:r=1}=this.props,c=e<0,l=[];for(let a=e;a<=t;a+=r){const e=s?s(a):"".concat(a),t=c&&a>0?"+":"";l.push(i.a.createElement("option",{key:a,value:a},t,e))}return i.a.createElement("select",{value:a,className:L()("number-select",n),onChange:this.handleOnChange},l)}}a(153);class Ue extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnChangeValue=(e,t)=>{const{setCondition:a,costRatioBaseForces:n}=this.props;a({costRatioBaseForces:{...n,[e]:t}})}}render(){const{costRatioBaseForces:e}=this.props;return i.a.createElement("div",{className:"cost-ratio-base-force"},i.a.createElement("span",{className:"title-inline"},"基準武力"),i.a.createElement("label",null,"1.0",i.a.createElement(Fe,{itemName:"10",onChangeValue:this.handleOnChangeValue,value:e[10],max:5,min:1})),i.a.createElement("label",null,"1.5",i.a.createElement(Fe,{itemName:"15",onChangeValue:this.handleOnChangeValue,value:e[15],max:7,min:2})),i.a.createElement("label",null,"2.0",i.a.createElement(Fe,{itemName:"20",onChangeValue:this.handleOnChangeValue,value:e[20],max:9,min:5})),i.a.createElement("label",null,"2.5",i.a.createElement(Fe,{itemName:"25",onChangeValue:this.handleOnChangeValue,value:e[25],max:10,min:6})),i.a.createElement("label",null,"3.0",i.a.createElement(Fe,{itemName:"30",onChangeValue:this.handleOnChangeValue,value:e[30],max:11,min:8})))}}a(154);class qe extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnChange=e=>{const t=e.currentTarget.value,{itemName:a,onChangeValue:n}=this.props;n(a,t)}}render(){const{value:e,className:t}=this.props;return i.a.createElement("input",{type:"text",value:e,className:L()("search-textbox",t),onChange:this.handleOnChange})}}class He extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnChangeValue=(e,t)=>{"searchMode"!==e?this.props.setCondition({[e]:t}):this.props.setCondition({searchMode:t?"assist":"general"})}}render(){const{filterContents:e,filterCondition:t,searchByDeckBelongState:a,searchByDeckCost:n,searchByDeckUnitType:s,setCondition:r,toggleCheckList:c}=this.props,l="general"!==t.searchMode;return i.a.createElement("div",{className:L()({"general-mode-off":l})},i.a.createElement("section",{className:"filter-section"},i.a.createElement("h2",{className:"title"},"武将/遊軍切り替え"),i.a.createElement(Be,{itemName:"searchMode",onChangeValue:this.handleOnChangeValue,isOn:l,labelOff:"武将",labelOn:"遊軍",width:160})),i.a.createElement("section",{className:"filter-section"},i.a.createElement("h2",{className:"title"},"勢力"),i.a.createElement(Ge,{itemName:"belongStates",items:e.belongStates,checkedItems:t.belongStates,onClickItem:c,square:!0,disabled:a})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"コスト"),i.a.createElement(Ge,{itemName:"costs",items:e.costs,checkedItems:t.costs,onClickItem:c,square:!0,disabled:n})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"兵種"),i.a.createElement(Ge,{itemName:"unitTypes",items:e.unitTypes,checkedItems:t.unitTypes,onClickItem:c,square:!0,disabled:s})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"武力"),i.a.createElement("div",{className:"title-button"},i.a.createElement(Be,{itemName:"useCostRatioForce",onChangeValue:this.handleOnChangeValue,isOn:t.useCostRatioForce,labelOff:"通常",labelOn:"コスト比",width:180})),i.a.createElement("div",{className:L()("normal-force",{active:!t.useCostRatioForce})},i.a.createElement("div",{className:"range"},i.a.createElement(Fe,{itemName:"forceMin",onChangeValue:this.handleOnChangeValue,value:t.forceMin,max:11,min:1}),"-",i.a.createElement(Fe,{itemName:"forceMax",onChangeValue:this.handleOnChangeValue,value:t.forceMax,max:11,min:1}))),i.a.createElement("div",{className:L()("cost-ratio-force",{active:t.useCostRatioForce})},i.a.createElement("div",{className:"range"},i.a.createElement(Fe,{itemName:"costRatioForceMin",onChangeValue:this.handleOnChangeValue,value:t.costRatioForceMin,max:5,min:-5}),"以上"),i.a.createElement(Ue,{costRatioBaseForces:t.costRatioBaseForces,setCondition:r}))),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"知力"),i.a.createElement("div",{className:"range"},i.a.createElement(Fe,{itemName:"intelligenceMin",onChangeValue:this.handleOnChangeValue,value:t.intelligenceMin,max:11,min:1}),"-",i.a.createElement(Fe,{itemName:"intelligenceMax",onChangeValue:this.handleOnChangeValue,value:t.intelligenceMax,max:11,min:1}))),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"征圧力"),i.a.createElement("div",{className:"range"},i.a.createElement(Fe,{itemName:"conquestMin",onChangeValue:this.handleOnChangeValue,value:t.conquestMin,max:4,min:0}),"-",i.a.createElement(Fe,{itemName:"conquestMax",onChangeValue:this.handleOnChangeValue,value:t.conquestMax,max:4,min:0}))),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"特技"),i.a.createElement("div",{className:"title-button"},i.a.createElement(Be,{itemName:"skillsAnd",onChangeValue:this.handleOnChangeValue,isOn:t.skillsAnd,labelOff:"OR",labelOn:"AND"})),i.a.createElement(Le,{itemName:"skills",items:e.skills,checkedItems:t.skills,onClickItem:c,square:!0})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"武将名検索"),i.a.createElement(qe,{itemName:"searchText",value:t.searchText,onChangeValue:this.handleOnChangeValue}),i.a.createElement("div",null,"スペース区切りでOR検索 読み仮名(ひらがな、カタカナ)対応")))}}var Ke=Object(o.b)(e=>{const{searchCondition:t}=e.deckReducer;return{filterCondition:e.datalistReducer.filterCondition.basic,filterContents:e.datalistReducer.filterContents,deckSearchCondition:t}},e=>({setCondition:Te(e)}),(e,t)=>{const{deckSearchCondition:a,filterCondition:n,filterContents:s}=e;let r;if(a){let e,t=!1;null!=a.belongState?(e=[a.belongState],t=!0):e=n.belongStates;const i=[a.cost];let c,l=!1;null!=a.unitType?(c=[a.unitType],l=!0):c=n.unitTypes,r={filterContents:s,searchByDeckBelongState:t,searchByDeckCost:!0,searchByDeckUnitType:l,filterCondition:{...n,belongStates:e,costs:i,unitTypes:c}}}else r={filterContents:s,filterCondition:n,searchByDeckBelongState:!1,searchByDeckCost:!1,searchByDeckUnitType:!1};const i={...t,toggleCheckList:(e,a)=>{t.setCondition(Me(n,e,a))}};return{...r,...i}},{areMergedPropsEqual:()=>!1})(He);a(155);const Ye=[{id:"1",name:"あり"},{id:"0",name:"なし"}];class We extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnChangeValue=(e,t)=>{this.props.setCondition({[e]:t})}}render(){const{searchMode:e,filterContents:t,filterCondition:a,toggleCheckList:n}=this.props,s="general"!==e,r=[];return t.versions.forEach((e,t)=>{r.push(i.a.createElement(Ge,{key:t+1,itemName:"versions",items:e,checkedItems:a.versions,onClickItem:n}))}),i.a.createElement("div",{className:L()({"general-mode-off":s})},i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"登場弾"),i.a.createElement("div",{className:"title-button"},i.a.createElement(Be,{itemName:"enableDetailVersion",onChangeValue:this.handleOnChangeValue,isOn:a.enableDetailVersion,labelOff:"メジャーVer",labelOn:"詳細Ver",width:220})),i.a.createElement("div",{className:L()("major-version",{active:!a.enableDetailVersion})},i.a.createElement(Ge,{itemName:"majorVersions",items:t.majorVersions,checkedItems:a.majorVersions,onClickItem:n})),i.a.createElement("div",{className:L()("detail-version",{active:a.enableDetailVersion})},r)),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"将器主効果候補"),i.a.createElement("div",{className:"title-button"},i.a.createElement(Be,{itemName:"genMainsAnd",onChangeValue:this.handleOnChangeValue,isOn:a.genMainsAnd,labelOff:"OR",labelOn:"AND"})),i.a.createElement(Ge,{itemName:"genMains",items:t.genMains,checkedItems:a.genMains,onClickItem:n})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"レアリティ"),i.a.createElement(Ge,{itemName:"rarities",items:t.rarities,checkedItems:a.rarities,onClickItem:n,square:!0})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"官職"),i.a.createElement(Ge,{itemName:"generalTypes",items:t.generalTypes,checkedItems:a.generalTypes,onClickItem:n})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"カード種別"),i.a.createElement(Ge,{itemName:"varTypes",items:t.varTypes,checkedItems:a.varTypes,onClickItem:n})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"ぽけっと武将"),i.a.createElement(Ge,{itemName:"pockets",items:Ye,checkedItems:a.pockets,onClickItem:n})))}}var Xe=Object(o.b)(e=>({searchMode:e.datalistReducer.filterCondition.basic.searchMode,filterCondition:e.datalistReducer.filterCondition.detail,filterContents:e.datalistReducer.filterContents}),e=>({setCondition:xe(e)}),(e,t)=>({...e,...t,toggleCheckList:(a,n)=>{t.setCondition(function(e,t,a){const n=e.filterCondition[t];if(!(n instanceof Array))return console.warn("".concat(t," is not array.")),{};const{checked:s,targetValue:r}=we(a,n),i={[t]:r};switch(t){case"majorVersions":return{...i,versions:_e({filterContents:e.filterContents.versions,filterCondition:e.filterCondition.versions,value:a,checked:s})};case"versions":return{...i,majorVersions:Re(e.filterContents.majorVersions,e.filterCondition.majorVersions,r,a,s)};default:return i}}(e,a,n))}}),{areMergedPropsEqual:()=>!1})(We);a(156),a(157);class Je extends Ge{createButton(e,t,a,n,s){if("string"!=typeof t||!t.includes("】"))return super.createButton(e,t,a,n,L()(s,"strategy-category-button"));const r=[],c=t.split("】");return c.forEach((e,t)=>{t===c.length-1?r.push(i.a.createElement("span",{className:"main-name",key:t},e)):r.push(i.a.createElement("span",{className:"sub-name",key:t},e+"】"))}),super.createButton(e,r,a,n,L()(s,"multiline-label","strategy-category-button"))}}a(158);class ze extends Ge{createLabel(e){if(null==e.code)return"";const t=ye(e.code);return i.a.createElement("img",{className:"range-image",src:t})}createButton(e,t,a,n,s){return super.createButton(e,t,a,n,L()(s,"strategy-range-button"))}}class Qe extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnChangeValue=(e,t)=>{this.props.setCondition({[e]:t})}}render(){const{searchMode:e,filterContents:t,filterCondition:a,toggleCheckList:n}=this.props,s="general"!==e;return i.a.createElement("div",{className:L()({"general-mode-off":s})},i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"計略表示切り替え"),i.a.createElement(Be,{itemName:"showStrategyExplanation",onChangeValue:this.handleOnChangeValue,isOn:a.showStrategyExplanation,labelOff:"計略名",labelOn:"計略説明",width:200})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"計略名検索"),i.a.createElement(qe,{itemName:"strategySearchName",value:a.strategySearchName,onChangeValue:this.handleOnChangeValue}),i.a.createElement("div",null,"スペース区切りでAND検索 読み仮名(ひらがな、カタカナ)対応")),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"計略説明検索"),i.a.createElement(qe,{itemName:"strategySearchExplanation",value:a.strategySearchExplanation,onChangeValue:this.handleOnChangeValue}),i.a.createElement("div",null,"スペース区切りでAND検索")),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"計略必要士気"),i.a.createElement("div",{className:"range"},i.a.createElement(Fe,{itemName:"moraleMin",onChangeValue:this.handleOnChangeValue,value:a.moraleMin,max:12,min:1}),"-",i.a.createElement(Fe,{itemName:"moraleMax",onChangeValue:this.handleOnChangeValue,value:a.moraleMax,max:12,min:1}))),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"計略カテゴリー"),i.a.createElement(Je,{itemName:"strategyCategories",items:t.strategyCategories,checkedItems:a.strategyCategories,onClickItem:n})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"計略効果時間"),i.a.createElement(Ge,{itemName:"strategyTimes",items:t.strategyTimes,checkedItems:a.strategyTimes,onClickItem:n})),i.a.createElement("section",{className:"filter-section general-mode-only"},i.a.createElement("h2",{className:"title"},"計略範囲"),i.a.createElement(ze,{itemName:"strategyRanges",items:t.strategyRanges,checkedItems:a.strategyRanges,onClickItem:n})))}}var $e=Object(o.b)(e=>({searchMode:e.datalistReducer.filterCondition.basic.searchMode,filterCondition:e.datalistReducer.filterCondition.strategies,filterContents:e.datalistReducer.filterContents}),e=>({setCondition:Oe(e),...Object(d.a)({setShowStrategyExplanation:k.setShowStrategyExplanation},e)}),(e,t)=>({...e,...t,toggleCheckList:(a,n)=>{t.setCondition(function(e,t,a){const n=e[t];if(!(n instanceof Array))return console.warn("".concat(t," is not array.")),{};const{targetValue:s}=we(a,n);return{[t]:s}}(e.filterCondition,a,n))}}),{areMergedPropsEqual:()=>!1})(Qe),Ze=(a(159),a(160),a(83));class et extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnClick=()=>{const{itemName:e,value:t,onClick:a}=this.props;a&&a(e,t)}}render(){const{checked:e,children:t}=this.props;return i.a.createElement("div",{className:"radio-button",onClick:this.handleOnClick},i.a.createElement("span",{className:"radio-check"},i.a.createElement(B.a,{className:L()({checked:e}),icon:Ze.faCircle})),t)}}function tt(e,t){return"general"===e?"assist"===t?"personal-assist":"personal":"assist"===t?"personal-strategy":"personal-strategy-exclude-assist"}function at(e){return{generalConst:"personal-strategy"===e||"personal-strategy-exclude-assist"===e?"general-strategy":"general",assistConst:"personal-assist"===e||"personal-strategy"===e?"assist":"exclude-assist"}}class nt extends i.a.PureComponent{constructor(...e){super(...e),this.handleOnChangeDeckConstraints=(e,t)=>{this.props.setDeckConstraints({[e]:t}),"assistCardLimit"===e&&this.props.sliceDeckAssist()},this.handleOnChangeSameCardGeneral=(e,t)=>{const{assistConst:a}=at(this.props.sameCard),n=tt(t,a);this.handleOnChangeDeckConstraints(e,n)},this.handleOnChangeSameCardAssist=(e,t)=>{const{generalConst:a}=at(this.props.sameCard),n=tt(a,t);this.handleOnChangeDeckConstraints(e,n)}}costDisplayText(e){return"".concat(e/10)}assistLimitDisplayText(e){return 0===e?"なし":1===e?"あり":"".concat(e)}render(){const{show:e,limitCost:t,sameCard:a,assistCardLimit:n,closeDeckConfig:s}=this.props,r={};e||(r.display="none");const{generalConst:c,assistConst:l}=at(a);return i.a.createElement("div",{className:"deck-config",style:r},i.a.createElement("div",{className:"deck-config-inner"},i.a.createElement("div",{className:"deck-config-title"},"デッキ設定"),i.a.createElement("div",{className:"deck-config-buttons"},i.a.createElement("button",{className:"action-buton-ok",onClick:s},"OK")),i.a.createElement("div",{className:"deck-config-body"},i.a.createElement("section",{className:"filter-section"},i.a.createElement("h2",{className:"title"},"コスト 上限"),i.a.createElement(Fe,{itemName:"limitCost",onChangeValue:this.handleOnChangeDeckConstraints,value:t,max:250,min:10,step:5,displayText:this.costDisplayText})),i.a.createElement("section",{className:"filter-section"},i.a.createElement("h2",{className:"title"},"遊軍"),i.a.createElement(Fe,{itemName:"assistCardLimit",onChangeValue:this.handleOnChangeDeckConstraints,value:n,max:1,min:0,step:1,displayText:this.assistLimitDisplayText})),i.a.createElement("section",{className:"filter-section same-card-constraint"},i.a.createElement("h2",{className:"title"},"同名武将 制限"),i.a.createElement(et,{itemName:"sameCard",value:"general",checked:"general"===c,onClick:this.handleOnChangeSameCardGeneral},"同名武将登録不可(通常ルール)"),i.a.createElement(et,{itemName:"sameCard",value:"general-strategy",checked:"general-strategy"===c,onClick:this.handleOnChangeSameCardGeneral},"同名武将登録可、ただし同計略の同名武将は登録不可")),i.a.createElement("section",{className:"filter-section same-card-constraint"},i.a.createElement("h2",{className:"title"},"同名武将・遊軍 制限"),i.a.createElement(et,{itemName:"sameCard",value:"exclude-assist",checked:"exclude-assist"===l,onClick:this.handleOnChangeSameCardAssist},"同名の武将・遊軍登録不可(通常ルール)"),i.a.createElement(et,{itemName:"sameCard",value:"assist",checked:"assist"===l,onClick:this.handleOnChangeSameCardAssist},"同名の武将・遊軍登録可")))))}}var st=Object(o.b)(e=>({show:e.windowReducer.openedDeckConfig,...e.deckReducer.deckConstraints}),e=>Object(d.a)({closeDeckConfig:g.closeDeckConfig,setDeckConstraints:y.setDeckConstraints,sliceDeckAssist:y.sliceDeckAssist},e))(nt);a(161);let rt=void 0;class it extends i.a.PureComponent{render(){const{show:e,closeUpdateInfo:t}=this.props,a={};return e?rt="./updateinfo.html":a.display="none",i.a.createElement("div",{className:"update-info",style:a},i.a.createElement("div",{className:"update-info-inner"},i.a.createElement("div",{className:"update-info-title"},"更新情報")),i.a.createElement("div",{className:"update-info-buttons"},i.a.createElement("button",{className:"action-buton-ok",onClick:t},"OK")),i.a.createElement("div",{className:"update-info-body"},i.a.createElement("iframe",{className:"update-info-iframe",src:rt})))}}var ct=Object(o.b)(e=>({show:e.windowReducer.openedUpdateInfo}),e=>Object(d.a)({closeUpdateInfo:g.closeUpdateInfo},e))(it);a(162);class lt extends i.a.PureComponent{render(){const{general:e}=this.props;if(!e)return i.a.createElement(i.a.Fragment,null);const t=e.strategy.explanation,a=[];t.split("\n").forEach((e,t)=>{a.push(i.a.createElement("span",{key:t},e))});const n=ye(e.strategy.stratRangeCode);return i.a.createElement("div",{className:"general-detail"},i.a.createElement("div",{className:"general-detail-inner"},i.a.createElement(he,{general:e,showStrategyExplanation:!1,showAddButtons:!1}),i.a.createElement("div",{className:"general-detail-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"strategy-explanation","data-label":"計略説明"},a),i.a.createElement("div",{className:"strategy-range","data-label":"計略範囲"},i.a.createElement("img",{className:"range-image",src:n}))))))}}var ot=Object(o.b)(e=>({general:e.windowReducer.detailGeneral}),{})(lt);a(163);class dt extends i.a.PureComponent{constructor(...e){super(...e),this.state={},this.actionWithAnimation=(e,t)=>{this.state.buttonAnimation||(this.props.animation?(this.setState({buttonAnimation:e}),setTimeout(()=>{this.setState({buttonAnimation:void 0}),t()},500)):t())},this.handleRedClick=e=>{e.stopPropagation(),this.actionWithAnimation("RED",this.props.actionRed)},this.handleBlueClick=e=>{e.stopPropagation(),this.actionWithAnimation("BLUE",this.props.actionBlue)},this.handleCancelClick=e=>{e.stopPropagation(),this.state.buttonAnimation||this.props.cancelable&&this.props.actionCancel()}}render(){const{show:e,title:t,message:a,logoUrl:n,redText:s,blueText:r,cancelable:c,animation:l}=this.props,{buttonAnimation:o}=this.state;let d="",m=!1,u=!1;"RED"===o?(d="緋略",m=!0):"BLUE"===o&&(d="蒼略",u=!0);const h={};return e||(h.display="none"),i.a.createElement("div",{className:"dialog-container",style:h},i.a.createElement("div",{className:"dialog-base"},i.a.createElement("div",{className:"dialog-background",onClick:this.handleCancelClick}),i.a.createElement("div",{className:"dialog"},i.a.createElement("div",{className:"dialog-inner"},i.a.createElement("div",{className:"dialog-title"},t),i.a.createElement("div",{className:"dialog-body"},i.a.createElement("div",{className:L()("dialog-logo",{show:null!=n})},i.a.createElement("img",{src:n})),i.a.createElement("div",{className:"dialog-message"},a)),i.a.createElement("div",{className:"dialog-actions"},i.a.createElement("div",{className:L()("dialog-action-button","dialog-action-red",{text:l}),onClick:this.handleRedClick},s),i.a.createElement("div",{className:L()("dialog-action-button","dialog-action-blue",{text:l}),onClick:this.handleBlueClick},r)),i.a.createElement("div",{className:L()("dialog-close",{cancelable:c}),onClick:this.handleCancelClick},"x"))),i.a.createElement("div",{className:L()("action-animation",{red:m,blue:u,show:m||u})},d)))}}var mt=Object(o.b)(e=>e.dialogReducer,e=>Object(d.a)({closeDialog:D.closeDialog},e),(e,t)=>{const{actionRed:a,actionBlue:n,actionCancel:s,...r}=e;return{...r,...{actionRed:()=>{a(),t.closeDialog()},actionBlue:()=>{n(),t.closeDialog()},actionCancel:()=>{s&&s(),t.closeDialog()}}}},{areMergedPropsEqual:()=>!1})(dt);class ut extends i.a.PureComponent{constructor(...e){super(...e),this.handleAppClick=()=>{this.props.clearActiveCard(),this.props.closeSideMenu()},this.handleSideMenuButtonClick=()=>{this.props.openSideMenu()}}componentDidMount(){this.props.appDidLoaded()}render(){const{ready:e,loading:t,resetConditions:a,openedSideMenu:n,openFilter:s,showNotice:r,closeFilter:c,closeAllModal:l,changeActiveFilterTab:o,openedFilter:d,openedAnyModal:m,openedAnyModalSmall:u,activeFilter:h,deckSelected:g}=this.props;return i.a.createElement("div",{className:L()(["app-container",{modal:m,"modal-small":u,ready:e,"deck-selected":g}]),onClick:this.handleAppClick},i.a.createElement("div",{className:L()("side-menu",{open:n})},i.a.createElement("div",{className:"side-menu-header"}),i.a.createElement(W,null),"©SEGA"),i.a.createElement("div",{className:"app-main"},i.a.createElement("div",{className:"app-deck-block"},i.a.createElement("div",{className:"app-header"},i.a.createElement("button",{className:L()("side-menu-button",{show:!n}),onClick:this.handleSideMenuButtonClick},i.a.createElement(B.a,{icon:F.faBars}),i.a.createElement(B.a,{icon:U.faExclamationCircle,className:L()("notice",{show:r})})),i.a.createElement("div",{className:"app-header-title"},"三国志大戦デッキシミュレーター")),i.a.createElement("div",{className:"deck-boad-container"},i.a.createElement(ie,null)),i.a.createElement("div",{className:"simple-filter-container"},i.a.createElement(je,null),i.a.createElement("button",{className:"open-filter",onClick:s},"絞込")),i.a.createElement(ke,null),i.a.createElement(De,null)),i.a.createElement("div",{className:L()(["card-filter-container",{open:d}])},i.a.createElement("h1",{className:"card-filter-title"},"絞り込みメニュー"),i.a.createElement("div",{className:"card-filter-buttons"},i.a.createElement(q,{tabs:p,activeTab:h,onTabChanged:o}),i.a.createElement(H,{resetConditions:a,closeFilter:c})),i.a.createElement("div",{className:L()(["card-filter-content",{active:"BASIC"===h}])},i.a.createElement(Ke,null)),i.a.createElement("div",{className:L()(["card-filter-content",{active:"DETAIL"===h}])},i.a.createElement(Xe,null)),i.a.createElement("div",{className:L()(["card-filter-content",{active:"STRAT"===h}])},i.a.createElement($e,null)))),i.a.createElement("div",{className:"modal-background",onClick:l}),i.a.createElement(ot,null),i.a.createElement(st,null),i.a.createElement(ct,null),i.a.createElement("div",{className:L()("loading-item",{loading:t})}),i.a.createElement(mt,null))}}a(164);let ht=null;function pt(){return"localStorage"in window&&function(e){try{const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==e.length}}(window.localStorage)}async function gt(e,t){const a=t+".md5",n=await async function(e){const t=await fetch(e+".md5");return t.ok?(await t.text()).trim():null}(e);if(!n)return localStorage.removeItem(a),localStorage.removeItem(t),null;const s=localStorage.getItem(a);let r=!1;if(s&&s===n){const e=localStorage.getItem(t);if(e)return JSON.parse(e);r=!0,localStorage.removeItem(a)}const i=await fetch(e),c=await i.json();return r||(localStorage.setItem(t,JSON.stringify(c)),localStorage.setItem(a,n)),c}var Et=async function(e,t){if(null!=ht||(ht=pt()),ht){const a=await gt(e,t);if(a)return a}return(await fetch(e)).json()};const Ct=(e,t=0,a=!1)=>{let n;return n=a?"-EX":t>0?"-".concat(t):"","第".concat(e,"弾").concat(n)};class ft{constructor(e,t,a){this.id=void 0,this.raw=void 0,this.majorVersion=void 0,this.addVersion=void 0,this.isEx=void 0,this.force=void 0,this.intelligence=void 0,this.conquest=void 0,this.cost=void 0,this.genMains=void 0,this.generalType=void 0,this.personal=void 0,this.rarity=void 0,this.skills=void 0,this.state=void 0,this.unitType=void 0,this.strategy=void 0,this.id=e,this.raw=t,Object.assign(this,a)}get code(){return this.raw.code}get pocketCode(){return this.raw.pocket_code}get name(){return this.personal?this.personal.name:""}get version(){return Ct(this.majorVersion,this.addVersion,this.isEx)}get versionValue(){const e=this.isEx?"-EX":"-".concat(this.addVersion);return"".concat(this.majorVersion).concat(e)}get hasPocket(){return""!==this.raw.pocket_code}get officialUrl(){return e=this.code,"https://3594t.net/datalist/?v=GENERAL&s=POPUP_GENERAL&c=".concat(e);var e}thumbUrl(e){return function(e){return"https://3594t.net/img/card_small/".concat(e,".jpg")}(e&&this.hasPocket?this.pocketCode:this.code)}avatarUrl(e){const t=e&&this.hasPocket?this.raw.pocket_avatar:this.raw.avatar;return"https://3594t.net/img/avatar/".concat(t,".png")}}class vt{constructor(e,t,a){this.id=void 0,this.raw=void 0,this.majorVersion=void 0,this.addVersion=void 0,this.isEx=void 0,this.personal=void 0,this.state=void 0,this.strategy=void 0,this.id=e,this.raw=t,this.majorVersion=a.majorVersion,this.addVersion=a.addVersion,this.isEx=a.isEx,this.personal=a.personal,this.state=a.state,this.strategy=a.strategy}get code(){return this.raw.code}get name(){return this.personal?this.personal.name:""}get version(){return Ct(this.majorVersion,this.addVersion,this.isEx)}get versionValue(){const e=this.isEx?"-EX":"-".concat(this.addVersion);return"".concat(this.majorVersion).concat(e)}get officialUrl(){return e=this.code,"https://3594t.net/datalist/?v=ASSIST&s=POPUP_ASSIST&c=".concat(e);var e}get thumbUrl(){return e=this.code,"https://3594t.net/img/card_small/".concat(e,".jpg");var e}get avatarUrl(){return function(e){return"https://3594t.net/img/avatar/".concat(e,".png")}(this.raw.avatar)}}const kt=(e,t)=>"".concat(t),Nt=e=>e.key,bt=(e,t,a)=>e.map((e,n)=>a(e,t(e,n))),yt=(e,t)=>Object.entries(e).map(([e,a])=>t(a,"".concat(e))),At=({code:e,name:t,name_short:a,short_name:n},s)=>({id:s,code:e,name:t,nameShort:a||n}),St={name:""},Dt={id:"",code:"",explanation:"",rawExplanation:"",morale:1,name:"",nameRuby:"",stratCategory:"",stratCategoryName:"",stratRange:"",stratRangeCode:"",stratTime:""},It={id:"",code:"",explanation:"",rawExplanation:"",name:"",nameRuby:""},Tt=(e,t)=>{const a=e.find(e=>e.id===t);return a||St},xt=e=>e.filter(e=>null!=e),Ot=e=>e.replace(/\<br\s*\/?\>/gi,"\n").replace(/\<img.+?alt=\"(.*?)\".*?\/\>/gi," $1 ");var _t=e=>{const t=bt(e.STATE,kt,(e,t)=>({...At(e,t),color:"rgb(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,")"),thincolor:"rgba(".concat(e.red,", ").concat(e.green,", ").concat(e.blue,", 0.2)")})),a=yt(e.COST,At),n={"連弩兵":"弩"},s=bt(e.UNIT_TYPE,Nt,(e,t)=>({...At(e,t),nameShort:n[e.name]||e.name[0]})),r=bt(e.SKILL,Nt,At),i=bt(e.GEN_MAIN,Nt,At),c=yt(e.RARITY,At),l=bt(e.GENERAL_TYPE,Nt,(e,t)=>{const a=At(e,t);return""===e.name?{...a,name:"なし(女性)"}:a}),o=bt(e.VER_TYPE,kt,At).map(e=>"Ex"===e.name?{...e,name:"EX"}:e),d=bt(e.STRAT_CATEGORY,Nt,At),m=bt(e.STRAT_RANGE,kt,(e,t)=>({id:t,code:e.code,name:""})),u=bt(e.STRAT,Nt,(e,t)=>{var a,n;const{morale:s,explanation:r,name_ruby:i,strat_category:c,strat_range:l,strat_time:o,...u}=e,h=(null===(a=d.find(e=>e.id===c))||void 0===a?void 0:a.name)||"",p=(null===(n=m.find(e=>e.id===l))||void 0===n?void 0:n.code)||"";return{id:t,...u,explanation:Ot(r),rawExplanation:r,morale:parseInt(s),nameRuby:i,stratCategory:c,stratCategoryName:h,stratRange:l,stratRangeCode:p,stratTime:o}}),h={},p=bt(e.GENERAL,kt,(n,o)=>{const d=parseInt(n.major_version),m=parseInt(n.add_version),p="2"===n.ver_type;return h[d]||(h[d]=[]),p||h[d].includes(m)||h[d].push(m),new ft(o,n,{majorVersion:d,addVersion:m,isEx:p,force:parseInt(n.buryoku),intelligence:parseInt(n.chiryoku),conquest:parseInt(n.seiatsu),cost:Tt(a,n.cost),genMains:xt([n.gen_main0,n.gen_main1,n.gen_main2].filter(e=>""!==e).map(e=>i.find(t=>t.id===e))),generalType:Tt(l,n.general_type),personal:e.PERSONAL[parseInt(n.personal)],rarity:Tt(c,n.rarity),skills:xt([n.skill0,n.skill1,n.skill2].filter(e=>""!==e&&"0"!==e).map(e=>r.find(t=>t.id===e))),state:Tt(t,n.state),unitType:Tt(s,n.unit_type),strategy:u.find(e=>e.id===n.strat)||Dt})}),g=Object.keys(h).map(e=>parseInt(e)),E=(e,t)=>e-t;g.sort(E),g.forEach(e=>{h[e].sort(E)});const C=bt(e.STRAT_TIME,kt,At),f=bt(e.ASSIST_STRAT_CATEGORY,Nt,At),v=bt(e.ASSIST_STRAT,Nt,(e,t)=>{const{code:a,key:n,name:s,explanation:r,name_ruby:i,assist_strat_category:c,strat_range:l}=e,o=f.find(e=>e.id===c),d=m.find(e=>e.id===l);return{id:t,code:a,key:n,name:s,explanation:Ot(r),rawExplanation:r,nameRuby:i,category:o,range:d}}),k=bt(e.ASSIST,kt,(a,n)=>{const s=parseInt(a.major_version),r=parseInt(a.add_version);return h[s]||(h[s]=[]),h[s].includes(r)||h[s].push(r),new vt(n,a,{majorVersion:s,addVersion:r,isEx:!1,personal:e.PERSONAL[parseInt(a.personal)],state:Tt(t,a.state),strategy:v.find(e=>e.id===a.assist_strat)||It})});return{filterContents:{belongStates:t,costs:a,unitTypes:s,skills:r,genMains:i,rarities:c,generalTypes:l,varTypes:o,versions:Object.entries(h).map(([e,t])=>{const a=bt(t,t=>"".concat(e,"-").concat(t),(t,a)=>({id:a,name:Ct(e,t)}));return a.push({id:"".concat(e,"-EX"),name:Ct(e,0,!0)}),a}),majorVersions:bt(g,e=>"".concat(e),(e,t)=>({id:t,name:Ct(e)})),strategyCategories:d,strategyRanges:m,strategyTimes:C,assistStrategyCategories:f},generals:p,strategies:u,assistGenerals:k,assistStrategies:v}};const Rt=(async()=>await(async()=>await Et("/data/base.json","3594t-deck/data/base.json"))())();var wt=Object(o.b)(e=>({...e.windowReducer,openedAnyModal:e.windowReducer.openedDeckConfig||e.windowReducer.openedUpdateInfo||!!e.windowReducer.detailGeneral||!e.windowReducer.ready,openedAnyModalSmall:e.windowReducer.openedFilter||!e.windowReducer.ready,loading:!e.windowReducer.ready,deckSelected:null!=e.deckReducer.activeIndex||null!=e.deckReducer.activeAssistIndex}),e=>{const t=Object(d.a)({setBaseData:k.setBaseData,beReady:g.beReady},e);return{appDidLoaded:async()=>{const e=await(async()=>{const e=await Rt;return _t(e)})();t.setBaseData(e),V||(S()({store:x,params:{deck:R,assist:w,cost:M,same_card:P,assist_limit:G},initialTruth:"location"}),V=!0),t.beReady(),Object(m.forceCheck)()},...Object(d.a)({clearActiveCard:y.clearActiveCard,resetConditions:k.resetConditions,...g},e)}},(e,t,a)=>({...e,...t,...a,clearActiveCard:()=>{e.deckSelected&&t.clearActiveCard()},closeSideMenu:()=>{e.openedSideMenu&&t.closeSideMenu()}}),{areMergedPropsEqual:()=>!1})(ut);s.a.load({custom:{families:["Noto Sans Japanese:n4,n7"],urls:["https://fonts.googleapis.com/earlyaccess/notosansjapanese.css"]}}),"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").catch(e=>{console.error(e)}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),x.dispatch(g.storeInstallPromptEvent(e))});const Mt=e=>{e?x.dispatch(g.enableNotice()):x.dispatch(g.disableNotice())};Mt(window.__noticeEnabled),window.addEventListener("__receiveNoticeChanged",e=>{e.preventDefault(),Mt(window.__noticeEnabled)}),l.a.render(i.a.createElement(o.a,{store:x},i.a.createElement(wt,null)),document.getElementById("app"));const Pt=document.getElementById("about");Pt&&Pt.parentNode&&Pt.parentNode.removeChild(Pt)},86:function(e,t,a){}});